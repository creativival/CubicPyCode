# 第2回：最初のキューブタワーを作ろう！

![CubicPy Logo](https://creativival.github.io/CubicPy/assets/cubicpy_logo.png)

## 今日のミッション
**自分の手でプログラミングしたタワーを作って、崩す快感を味わおう！**

## 前回のおさらい

前回は「キューパイ」の世界を知って、インストールも完了しましたね！サンプルプログラムを実行して、3D世界で遊ぶことができましたか？

今回はいよいよ、自分でコードを書いて、オリジナルのキューブタワーを作りましょう！そして最後には、それを思いっきり崩す快感を味わいましょう！

## VSCodeでPython開発を始めよう

コードを書くには、プログラミングに適したエディタを使うと便利です。ここでは、多くのプログラマーも使用している「Visual Studio Code（VSCode）」を使ってみましょう。

### VSCodeのインストール

まず、VSCodeをインストールしていない場合は、[公式サイト](https://code.visualstudio.com/)からダウンロードしてインストールしましょう。

### Python開発に必要な拡張機能をインストールする

VSCodeでPythonプログラミングを快適に行うには、いくつかの拡張機能が必要です。以下の手順でインストールしましょう。

![VSCode Python Extension](https://creativival.github.io/CubicPy/assets/vscode_python_extension.png)

**▲図1▲ VSCodeのPython拡張機能**

1. VSCodeを起動する
2. 左側のサイドバーにある「拡張機能」アイコン（四角が4つ並んだようなアイコン）をクリックする（▲図1▲）
3. 検索ボックスに「Python」と入力する
4. 「Python」（Microsoft公式のもの）を選んで「インストール」ボタンを押す
5. 「Pylance」（Pythonの補完機能を強化するもの）は自動でインストールされる
6. インストールが完了したら、VSCodeを再起動する

### CubicPyCodeフォルダをVSCodeで開く方法

CubicPyのプログラム（コードともいう）を保存するためのフォルダを作りましょう。フォルダの場所は自由に選べますが、ここではアクセスがしやすい「デスクトップ」に「CubicPyCode」という名前のフォルダを作成します。

> この「CubicPyCode」フォルダの中に、この連載記事で作成する、すべてのPythonファイルを保存します。

デスクトップに作ったCubicPyCodeフォルダをVSCodeで開くには、以下の方法があります。

#### 方法1：VSCodeから開く
1. VSCodeを起動する
2. メニューから「ファイル」→「フォルダを開く」を選択する
3. 表示されるダイアログでデスクトップを選び、「CubicPyCode」フォルダを選択して「フォルダの選択」ボタンをクリックする

#### 方法2：エクスプローラー（Finder）から開く
1. デスクトップにある「CubicPyCode」フォルダを右クリックする
2. コンテキストメニューから「Code で開く」を選択する（この選択肢がない場合は、方法1を使ってください）

### 新しいPythonファイルを作成する方法

VSCodeでCubicPyCodeフォルダを開いたら、新しいPythonファイルを作成しましょう。

#### 方法1：エクスプロラービューから作成する

![VSCode New File](https://creativival.github.io/CubicPy/assets/vscode_new_file.png)

**▲図2▲ VSCodeで新しいファイルを作成する**

1. 左側のエクスプローラービューを選ぶ。
2. CUBICPYCODEフォルダの横に表示されるアイコン「新しいファイル」を選択する（▲図2▲）
3. ファイル名を入力する（my_first_cube.py）- 必ず `.py` の拡張子をつけることを忘れないでください
4. Enterキーを押して確定する

#### 方法2：VSCodeのメニューから作成する

または、以下の方法でも作成できます。
1. メニューから「ファイル」→「新しいファイル」を選択する
2. ファイルの種類として「Python File」を選ぶ
2. 新しく開いたタブに、プログラムを入力する
3. 「ファイル」→「名前を付けて保存」を選択し、CubicPyCodeフォルダ内に適切な名前（my_first_cube.py）で保存する

### Pythonファイルを実行する方法

VSCodeでPythonファイルを編集したら、PowerShellやターミナルを使って実行します。以下の手順で実行してみましょう。

1. VSCodeで新しいターミナルを開く（メニューから「ターミナル」→「新しいターミナル」）
2. ターミナルウィンドウで以下のコマンドを入力する

```bash
cubicpy my_first_cube.py
```
3. Enterキーを押して実行する
4. 何も配置されていない3D空間が表示されたら、成功です（▲図3▲）。my_first_cube.pyにはまだ何も書かれていないため、物体は何も表示されていません。

![Run empty file](https://creativival.github.io/CubicPy/assets/cubicpy_run_empty_file.png)

**▲図3▲ 3D空間を作成する**

> 💡 **先生からのヒント**: VSCodeのターミナルは、PowerShellやコマンドプロンプトと同じように使えるよ。でも、すでにCubicPyCodeフォルダが開かれているから、ファイルの場所を探す必要はないんだ！

## 初めての「コード」〜箱１つを置いてみよう

まずは、最も基本的なことからスタートしましょう。3D空間に1つの箱を置いてみましょう。

### 最初のコードを書いてみよう

先ほど作成した「my_first_cube.py」にプログラムを書いていきます。以下のコードを入力してください。

コードは一文字ずつ入力してもいいですし、面倒ならコピー＆ペーストでも構いません。

```python
# 物体データの配列を作成
body_data = []

# 箱を1つ追加
body_data.append({
    'type': 'cube',  # 形は立方体（箱）
    'pos': (0, 0, 0),  # 位置: x, y, z
    'scale': (1, 1, 1),  # サイズ: 幅, 奥行き, 高さ
    'color': (1, 0, 0)  # 色: 赤, 緑, 青 (0〜1)
})
```

> 💡 **先生からのヒント**: コードの右側に「#」で始まる文は「コメント」と言って、プログラムの説明書きです。コンピュータは無視して読みません。人間が読むための説明なんだ！

> 🔍 **Pythonの基本**: このコードでは、いくつかのPythonの基本要素を使っています:
> - **変数**: `body_data`は変数です。データを入れる箱のようなもので、名前をつけて後で使えます
> - **リスト（配列）**: `[]`で作る入れ物で、複数のものを順番に格納できます
> - **append()**: リストに新しい要素を追加するための命令（メソッド）です
> - **辞書**: `{}`で作る入れ物で、`'キー': 値`のペアでデータを管理します。例えば`'type': 'cube'`では、`'type'`がキー、`'cube'`が値です

### コードを実行してみよう

このファイルを保存したら、VSCodeのターミナルで以下のコマンドを実行します。

```bash
cubicpy my_first_cube.py
```

![Single Cube](https://creativival.github.io/CubicPy/assets/single_cube.png)

**▲図4▲ 最初の一つの赤い箱**

ワオ！赤い箱が出てきましたね（▲図4▲）！これがプログラミングの第一歩です。

## 箱の位置とサイズを変えてみよう

今作った箱は、位置が(0, 0, 0)で、サイズが(1, 1, 1)でした。これを変えてみましょう。

「my_first_cube.py」を次のように変更してみましょう。

```python
# 物体データの配列を作成
body_data = []

# 箱を1つ追加（位置とサイズを変更）
body_data.append({
    'type': 'cube',
    'pos': (0, 0, 2),  # 高さを2に変更
    'scale': (2, 2, 1),  # 幅と奥行きを2に、高さを1に変更
    'color': (0, 1, 0)  # 色を緑に変更
})
```

```bash
cubicpy my_first_cube.py
```

![Flat Single Cube](https://creativival.github.io/CubicPy/assets/flat_single_cube.png)

**▲図5▲ 空中に配置した緑の箱**

保存して実行すると、大きくて平たい緑の箱が空中に浮いているのが見えます（▲図5▲）！緑の箱は重力でゆっくり落下してから地面で静止します。マイクラと違って、箱は空中に浮いたままにはなりません。

> 🔍 **発見ポイント**: 位置の座標(x, y, z)は、xが左右、yが前後、zが上下を表しています。(0, 0, 0)は地面の中心です。

## 複数の箱を置いてみよう

次は、複数の箱を置いてみましょう。「my_multiple_cubes.py」という新しいファイルを作って、以下のコードを入力してください。

```python
# 物体データの配列を作成
body_data = []

# 赤い箱
body_data.append({
    'type': 'cube',
    'pos': (-2, 0, 0),  # 左側
    'scale': (1, 1, 1),
    'color': (1, 0, 0)  # 赤
})

# 緑の箱
body_data.append({
    'type': 'cube',
    'pos': (0, 0, 0),  # 中央
    'scale': (1, 1, 1),
    'color': (0, 1, 0)  # 緑
})

# 青い箱
body_data.append({
    'type': 'cube',
    'pos': (2, 0, 0),  # 右側
    'scale': (1, 1, 1),
    'color': (0, 0, 1)  # 青
})
```

![Three Cubes](https://creativival.github.io/CubicPy/assets/three_cubes.png)

**▲図6▲ 横一列に並んだ3つの箱**

保存して実行すると、3つの箱が横一列に並んでいるのが見えますね（▲図6▲）！

> CubicPyでは、物体の色は「赤、緑、青」の三原色を混ぜて、任意の色を作ることができます。例えば、(1, 1, 0)は赤と緑を混ぜた黄色です。3つの数字は0から1の間で指定します。

## 繰り返しの魔法：for文で積み木を自動で積み上げよう

さて、10個の箱を積み上げたいとき、同じコードを10回書くのは大変ですね。そこで「繰り返し」の魔法、「for文」を使います！

新しいファイルを「my_first_tower.py」という名前で作成し、次のコードを入力してください。

```python
# 物体データの配列を作成
body_data = []

# 10段の箱を積み上げる
for i in range(10):
    body_data.append({
        'type': 'cube',
        'pos': (0, 0, i),  # i の値が0から9まで変わる
        'scale': (1, 1, 1),
        'color': (1, 0, 0)  # すべて赤い箱
    })
```

このコードの中の `for i in range(10):` という部分が魔法の呪文です！「0から9までの数字を順番に変数iに入れて、その下の処理を繰り返す」という意味です。

![Red Cube Tower](https://creativival.github.io/CubicPy/assets/red_cube_tower.png)

**▲図7▲ 10段の赤い箱タワー**

保存して実行すると、10段の赤い箱の塔が出来上がります（▲図7▲）！

> 🚀 **すごいね！**: たった5行のコードで、10個の箱を自動で積み上げることができました！これがプログラミングのすごいところ！数字の10を100に変えるだけで、100段の箱を積むこともできます！

## 色の変化を付けて虹色タワーを作ろう

同じ色の塔も素敵ですが、もっとカラフルにしてみましょう。「rainbow_tower.py」という新しいファイルを作って、以下のコードを入力してください。

```python
# 物体データの配列を作成
body_data = []

# 10段の箱を積み上げる（虹色）
for i in range(10):
    body_data.append({
        'type': 'cube',
        'pos': (0, 0, i),
        'scale': (1, 1, 1),
        'color': (i/10, 0, 1-i/10),  # 赤から紫へのグラデーション
    })
```

色の部分が変わりましたね！`(i/10, 0, 1-i/10)` という部分で、iの値によって色が変化します。iが0のとき(0, 0, 1)で青、iが9のとき(0.9, 0, 0.1)で赤に近い色になります。

![Rainbow Tower](https://creativival.github.io/CubicPy/assets/cube_tower.png)

**▲図8▲ 色が変化するキューブタワー**

保存して実行すると、下から上へ色が変化するキューブタワーができます（▲図8▲）！for文という魔法を使うと、箱の位置を変えるだけでなく、色も変化させることもできます。

もし色を段階的に変えるときに、すべての箱を手で書くのは大変ですが、for文を使えば簡単にできますね！「面倒なことを簡単にできるようになる」 - これがプログラミングの魔法です！

## 操作マスター：カメラ移動と地面傾け機能で崩壊を楽しもう

さあ、せっかく作ったタワーを崩してみましょう！操作方法をマスターして、タワーを崩す快感を味わいましょう。

### 操作方法のおさらい

- **矢印キー**: カメラ角度の変更
- **マウスホイール**: ズームイン/アウト
- **W/S/A/D**: 地面を傾ける（崩れる！）
- **F/G**: 重力の強さを変更
- **R**: リセット
- **ESC**: 終了

![Falling Tower](https://creativival.github.io/CubicPy/assets/breaking_cube_tower.png)

**▲図9▲ 傾いた地面で崩れていくタワー**

特に「W/A/S/D」キーで地面を傾けると、重力でタワーが崩れていきます（▲図9▲）。横から押して積み木を倒すのではなく、「地面の方を傾ける」のがキューパイの面白いところです！

## チャレンジしてみよう：オリジナルタワーを作る

ここまでの知識を使って、オリジナルのタワーを作ってみましょう！以下のようなアイデアを試してみてください。

1. **巨大タワー**: もっと高いタワーを作る（20段、30段...）
2. **太いタワー**: サイズを変えて、もっと太いタワーを作る
3. **複数のタワー**: 異なる位置に複数のタワーを作る
4. **色の実験**: 色の組み合わせを変えて、別の色のグラデーションを作る

例えば、2つのタワーを作るコードは次のようになります。`two_towers.py`というファイルを作成して、以下のコードを入力してください。

```python
# 物体データの配列を作成
body_data = []

# 左側のタワー（青から緑へ）
for i in range(10):
    body_data.append({
        'type': 'cube',
        'pos': (-3, 0, i),  # 左側の位置
        'scale': (1, 1, 1),
        'color': (0, i/10, 1-i/10),  # 青から緑へ
    })

# 右側のタワー（赤からオレンジへ）
for i in range(10):
    body_data.append({
        'type': 'cube',
        'pos': (3, 0, i),  # 右側の位置
        'scale': (1, 1, 1),
        'color': (1, i/10, 0),  # 赤からオレンジへ
    })
```

![Mixed Shapes](https://creativival.github.io/CubicPy/assets/two_towers.png)

**▲図10▲ ２つのレインボータワー**

## もっと冒険してみよう：他の形も試してみる

キューパイでは、箱(cube)だけでなく、球(sphere)や円柱(cylinder)も使えます！試してみましょう。`mixed_shapes.py`というファイルを作成して、以下のコードを入力してください。

```python
# 物体データの配列を作成
body_data = []

# 床の箱を置く
body_data.append({
    'type': 'cube',
    'pos': (0, 0, 0),
    'scale': (5, 5, 0.5),  # 平たい箱
    'color': (0.5, 0.5, 0.5),  # グレー
    'mass': 0  # 質量0で動かないようにする
})

# 球を置く
body_data.append({
    'type': 'sphere',
    'pos': (0, 0, 3),
    'scale': (1, 1, 1),
    'color': (1, 0, 0)  # 赤
})

# 円柱を置く
body_data.append({
    'type': 'cylinder',
    'pos': (2, 0, 2),
    'scale': (0.5, 0.5, 2),  # 細長い円柱
    'color': (0, 1, 0)  # 緑
})
```

![Mixed Shapes](https://creativival.github.io/CubicPy/assets/mixed_shapes.png)

**▲図11▲ 箱、球、円柱を組み合わせた作品**

## デバッグのコツ

もしエラーが出たら、こんなことを確認してみよう。

- スペルミス（綴り間違い）はないか？ `body_data` と `bodydata` は別物！
- カンマ(,)、カッコ、コロン(:)の忘れはないか？
- インデント（行の始めの空白）は正しいか？Pythonでは空白の数がとても重要！
- 数値や文字列の書式は正しいか？

```python
# エラーの例と修正
# エラー: カンマが抜けている
body_data.append({
    'type': 'cube'  # ここにカンマが必要
    'pos': (0, 0, 0)
})

# 修正版
body_data.append({
    'type': 'cube',  # カンマを追加
    'pos': (0, 0, 0)
})
```

## VSCodeでよく使う便利な機能

VSCodeには、Pythonプログラミングを助ける便利な機能がたくさんあります。

1. **コードの補完**: 入力中に候補が表示されるので、タブキーで選択できます
2. **シンタックスハイライト**: コードの要素ごとに色分けされて読みやすくなります
3. **エラーチェック**: 間違いがあると赤い波線で教えてくれます（▲図10▲）
4. **コード整形**: 右クリックメニューから「ドキュメントのフォーマット」を選ぶとコードが整形されます
5. **複数行コメント**: 選択した行を`Ctrl+/`（Mac: `Cmd+/`）でまとめてコメントアウトできます

![VSCode Features](https://creativival.github.io/CubicPy/assets/vscode_features.png)

**▲図12▲ VSCodeの便利な機能**

## プロジェクト管理のコツ

CubicPyCodeフォルダで複数のファイルを作成していくと、整理が必要になります。以下のヒントを参考にしてください。

1. **ファイル名は分かりやすく**: 内容が分かる名前をつけましょう（例：tower_10blocks.py）
2. **フォルダで整理**: VSCodeで右クリックして「新しいフォルダ」を作り、関連するファイルをまとめましょう
3. **README.txtを作る**: 自分のプロジェクトの説明や使い方をテキストファイルにまとめておくと便利です
4. **バックアップを取る**: 重要なファイルは別の場所にコピーしておきましょう

## 次回予告

次回は「様々な形の3D建築を作ろう！」。円柱タワーやピラミッド型の建築物など、もっと複雑な形を作る方法を学びます！

> 🎮 **宿題（やってみよう）**: 今回学んだfor文を使って、自分だけのオリジナルタワーを作ってみよう。色の組み合わせや高さ、形を変えて、友達に自慢できる作品に挑戦してみよう！

---

**キューパイでプログラミングを楽しもう！次回もお楽しみに！**